<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Bootstrap 101 Template</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
</head>
<body>
    <div class="container">
        <center><textarea class="form-control" rows="1" placeholder={{name}}></textarea></center>
        <div class="row">
            <div class="col-sm-3">
                <img class="img-thumbnail" alt="avatar" width="400px"
                     src={{avatar}}>
		<div class="row"><input type=submit class="warning button" value="Загрузить изображение"></div>
            </div>
	  
            <div class="col-sm-9">
                <textarea class="form-control" rows="3" placeholder={{lable}}></textarea>
            </div>
        </div>
        <div class="row"  style="margin-top: 15px; margin-bottom: 15px;">
            <div class="col-sm-6">
                <div id="map" style="width: 100%; height: 400px"></div>
            </div>

            <div class="col-xs-6">
                <form style="margin-bottom: 20px;">
			<div class="row" style="width: 50%; margin-top: 5%; margin-left: 5%; margin-bottom: 5%; float: center;">
			    <form onsubmit="CommentEvent({{ id }}, &#34;{{ user }}&#34;); return false;">
				<div class="row">{{ form.body(cols="10", rows="5") }}</div>
				<div class="row"><input type=submit class="warning button" value="Комментировать"></div>
			    </form>
			</div>                    
                    <div class="form-inline">
                        <form>
                            <input type="file" class="btn btn-default" value="Выбрать файл" onclick="" id="image" />
                            <input type="submit" class="btn btn-default" value="Отправить" id="submit" onclick=""/>
                        <script type="text/javascript">
                            let send = () => {
                                  var reader = new FileReader();
                                  reader.onload = function() {

                                    var arrayBuffer = this.result,
                                      array = new Uint8Array(arrayBuffer),
                                      binaryString = String.fromCharCode.apply(null, array);

                                    console.log(binaryString);

                                  }
                                  reader.readAsArrayBuffer(document.getElementById('image').files[0]);

                            }

                            document.getElementById('submit').onclick = send;
                        </script>
                        </form>
                    </div>
                </form>
		<div class="row" style="width: 50%; margin-top: 5%; margin-left: 5%; margin-bottom: 5%; float: center;">
		    <div class="comments">
			{% for i in comments_before %}
			    <div class='row'>
				<div class='medium-10 columns'>
				    <div class='callout secondary'>
				        <div class='row'>
				            <div class='medium-12 columns'>
				                <a href="/user/{{i[0]}}">  <p class="text-left" style="color: #ffae00">{{i[0]}}</p> </a>
				                <p>{{i[1]}}</p>
				            </div>
				        </div>
				    </div>
    		    </div>
			{% endfor 
            binaryString = String.fromCharCode.apply(null, array);%}
		    </binaryStringv>
		</div>                
            </div>
        </div>
        <div class="row">

            <div class="col-mod-2">
                &nbsp;
            </div>
        </div>
    </div>

     <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script type="text/javascript">
        ymaps.ready(init);
        var myMap;

        function init(){
            myMap = new ymaps.Map("map", {
                center: [55.76, 37.64],
                zoom: 7
            });
        }
    </script>
    <center><div class="row"><input type=submit class="warning button" value="Сохранить изменения"></div></center>
</body>
  </html>
